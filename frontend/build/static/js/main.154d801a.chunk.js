(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{180:function(e,t,a){e.exports=a(437)},185:function(e,t,a){},204:function(e,t,a){},437:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),i=a(7),c=a.n(i),o=(a(185),a(123)),l=a(84),s=a(117),d=a(118),u=a(124),h=a(119),m=a(125),f=a(126),p=a(64),v=a.n(p),g=(a(204),a(441)),b=a(442),E=a(445),w=a(443),S=a(439),y=a(440),x=a(78),O=a(444),j=a(167),k=a.n(j),C=g.a.Item,D=r.a.createContext(),I=b.a.TextArea;var A=g.a.create()(function(e){var t=e.form,a=(e.index,Object(f.a)(e,["form","index"]));return r.a.createElement(D.Provider,{value:t},r.a.createElement("tr",a))}),F=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(u.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={editing:!1},a.toggleEdit=function(){var e=!a.state.editing;a.setState({editing:e},function(){e&&a.input.focus()})},a.handleClickOutside=function(e){a.state.editing&&a.cell!==e.target&&!a.cell.contains(e.target)&&a.save()},a.save=function(){var e=a.props,t=e.record,n=e.handleSave;a.form.validateFields(function(e,r){e||(a.toggleEdit(),n(Object(l.a)({},t,r)))})},a}return Object(m.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.props.editable&&document.addEventListener("click",this.handleClickOutside,!0)}},{key:"componentWillUnmount",value:function(){this.props.editable&&document.removeEventListener("click",this.handleClickOutside,!0)}},{key:"render",value:function(){var e=this,t=this.state.editing,a=this.props,n=a.editable,i=a.dataIndex,c=a.title,o=a.record,l=(a.index,a.handleSave,Object(f.a)(a,["editable","dataIndex","title","record","index","handleSave"]));return r.a.createElement("td",Object.assign({ref:function(t){return e.cell=t}},l),n?r.a.createElement(D.Consumer,null,function(a){return e.form=a,t?r.a.createElement(C,{style:{margin:0}},a.getFieldDecorator(i,{rules:[{required:!0,message:"".concat(c," is required.")}],initialValue:o[i]})(r.a.createElement(I,{ref:function(t){return e.input=t},onPressEnter:e.save,autosize:!0}))):r.a.createElement("pre",{className:"editable-cell-value-wrap",style:{paddingRight:24},onClick:e.toggleEdit},r.a.createElement(k.a,{source:l.children[2],renderers:{code:function(e){var t=e.value;return r.a.createElement(E.a,{message:t,type:"info"})}}}))}):l.children)}}]),t}(r.a.Component),V=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).handleDelete=function(e){var t=Object(o.a)(a.state.dataSource);a.setState({dataSource:t.filter(function(t){return t.id!==e})}),v.a.delete("/api/entries/".concat(e)).then(function(){w.a.success({message:"\u0423\u0414\u041e\u041b\u0418\u041b!"})}).catch(function(){w.a.error({message:"\u0447\u043e\u0442 \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a!"})})},a.handleSave=function(e){var t=Object(o.a)(a.state.dataSource),n=t.findIndex(function(t){return e.id===t.id}),r=t[n];t.splice(n,1,Object(l.a)({},r,e)),a.setState({dataSource:t}),v.a.put("/api/entries/".concat(e.id),{text:e.body}).then(function(){w.a.success({message:"\u0421\u041e\u0425\u0420\u041e\u041d\u0418\u041b!"})}).catch(function(){w.a.error({message:"\u0447\u043e\u0442 \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a!"})})},a.handleSearch=function(e){a.setState({search:e.target.value})},a.showDrawer=function(){a.setState({drawerVisible:!0})},a.hideDrawer=function(){a.setState({drawerVisible:!1})},a.handleSubmit=function(e){e.preventDefault(),a.props.form.validateFields(function(e,t){e||(a.hideDrawer(),v.a.post("/api/entries/",{text:t.text}).then(function(){w.a.success({message:"\u0421\u041e\u0417\u0414\u041e\u041b\u041e\u0421\u042c!"}),a.getAllEntries()}).catch(function(){w.a.error({message:"\u0447\u043e\u0442 \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a!"})}))})},a.columns=[{title:"Id",dataIndex:"id"},{title:"Text",dataIndex:"body",editable:!0},{title:"Rating",dataIndex:"rating"},{title:"Created",dataIndex:"createdAt"},{title:"Action",dataIndex:"operation",width:100,render:function(e,t){return a.state.dataSource.length>=1?r.a.createElement("div",{style:{width:100}},r.a.createElement(S.a,{title:"Sure to delete?",onConfirm:function(){return a.handleDelete(t.id)}},r.a.createElement("a",{href:"javascript:;"},"Delete"))):null}}],a.state={search:"",dataSource:[],drawerVisible:!1},a}return Object(m.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.getAllEntries()}},{key:"getAllEntries",value:function(){var e=this;this.setState({loading:!0}),v.a.get("/api/entries").then(function(t){e.setState({dataSource:t.data,loading:!1})})}},{key:"render",value:function(){var e,t=this,a=this.state,n=a.dataSource,i=a.search,c=this.props.form,o=c.getFieldDecorator,s=c.getFieldsError,d=c.getFieldError,u=(c.isFieldTouched,d("text")),h={body:{row:A,cell:F}},m=this.columns.map(function(e){return e.editable?Object(l.a)({},e,{onCell:function(a){return{record:a,editable:e.editable,dataIndex:e.dataIndex,title:e.title,handleSave:t.handleSave}}}):e}),f=n.filter(function(e){return e.body.includes(i)}).sort(function(e,t){return new Date(t.createdAt)-new Date(e.createdAt)});return r.a.createElement("div",{className:"app"},r.a.createElement("div",{className:"search"},r.a.createElement(b.a,{onChange:this.handleSearch,value:i,size:"large",placeholder:"Search"})),r.a.createElement(y.a,{rowKey:"id",components:h,rowClassName:function(){return"editable-row"},bordered:!0,dataSource:f,columns:m,loading:this.state.loading}),r.a.createElement(x.a,{type:"primary",onClick:this.showDrawer},"\u041a\u0420\u0418\u042d\u0419\u0422!"),r.a.createElement(O.a,{width:640,title:"\u0421\u041e\u0417\u0414\u0410\u0419",placement:"right",closable:!1,onClose:this.hideDrawer,visible:this.state.drawerVisible},r.a.createElement(g.a,{onSubmit:this.handleSubmit},r.a.createElement(g.a.Item,{validateStatus:u?"error":"",help:u||""},o("text",{rules:[{required:!0,message:"\u041d\u0443 \u0442\u044b \u0432\u0432\u0435\u0434\u0438 \u0439\u043e\u043f \u0442\u0435\u043a\u0441\u0442, \u0447\u0435 \u043a\u0430\u043a \u043d\u0435 \u043f\u0430\u0446\u0430\u043d?"}]})(r.a.createElement(I,{placeholder:"\u0422\u0435\u043a\u0441\u0442-\u0445\u0443\u0435\u043a\u0441\u0442",autosize:!0}))),r.a.createElement(g.a.Item,null,r.a.createElement(x.a,{type:"primary",htmlType:"submit",disabled:(e=s(),Object.keys(e).some(function(t){return e[t]}))},"\u0421\u041e\u0425\u0420\u041e\u041d\u0418")))))}}]),t}(n.Component),N=g.a.create({name:"create_form"})(V);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(N,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[180,2,1]]]);
//# sourceMappingURL=main.154d801a.chunk.js.map